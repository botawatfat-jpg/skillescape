"use client";

import { useState } from "react";
import { useRouter } from "next/navigation";
import Image from "next/image";
import { StarIcon } from "lucide-react";
import { textConfig } from "@/shared/config/text-config";
import { useQuizStore } from "@/shared/store";
import styles from "./gender-selection.module.css";

export const GenderSelection: React.FC = () => {
  const router = useRouter();
  const { quizData, updateQuizData } = useQuizStore();
  const [selectedGender, setSelectedGender] = useState<
    "male" | "female" | null
  >(quizData.gender || null);

  const handleSelect = (gender: "male" | "female") => {
    setSelectedGender(gender);

    // Сохраняем в Zustand store
    updateQuizData({ gender });

    // Редирект на страницу с вопросами
    setTimeout(() => {
      router.push("/quiz/questions?pageId=1");
    }, 300);
  };

  return (
    <div className={styles.container}>
      {/* Gender Cards */}
      <div className={styles.cards}>
        <button
          className={`${styles.card} ${
            selectedGender === "male" ? styles.selected : ""
          }`}
          onClick={() => handleSelect("male")}
        >
          <div className={styles.imageWrapper}>
            <Image
              src="https://d2tpw6ibsnrlae.cloudfront.net/quiz_draft/v6.0.6/218/media/Gender Cards 2.0 2.webp"
              alt="Male"
              width={288}
              height={368}
              className={styles.image}
            />
          </div>
          <div className={styles.buttonText}>
            {textConfig.quiz.genderSelection.male} →
          </div>
        </button>

        <button
          className={`${styles.card} ${
            selectedGender === "female" ? styles.selected : ""
          }`}
          onClick={() => handleSelect("female")}
        >
          <div className={styles.imageWrapper}>
            <Image
              src="https://d2tpw6ibsnrlae.cloudfront.net/quiz/v6.1.3/1/media/Gender Cards 2.0-1 (1).png"
              alt="Female"
              width={288}
              height={368}
              className={styles.image}
            />
          </div>
          <div className={styles.buttonText}>
            {textConfig.quiz.genderSelection.female} →
          </div>
        </button>
      </div>

      {/* Trust Indicators */}
      <div className={styles.trustIndicators}>
        <div className={styles.indicator}>
          <svg
            className={styles.wheat}
            viewBox="0 0 32 82"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M31.8769 50.2215C31.6307 52.5892 30.7692 54.9569 29.7846 57.2C28.8 59.4431 27.4461 61.4369 26.2154 63.4308C24.8615 65.4246 23.6307 67.4184 22.4 69.4123C21.1692 71.4061 20.0615 73.5246 19.2 75.7677C19.323 73.2754 20.0615 70.9077 21.1692 68.7892C22.1538 66.5461 23.5077 64.5523 24.7384 62.4338C26.0923 60.44 27.323 58.4461 28.5538 56.4523C29.7846 54.4585 30.8923 52.4646 31.8769 50.2215ZM0.123047 56.7015C1.72305 58.5708 3.32305 60.1908 5.1692 61.6861C6.89228 63.3061 8.73843 64.8015 10.5846 66.2969C12.3077 67.9169 14.1538 69.5369 15.7538 71.2815C17.3538 73.1508 18.8307 75.1446 19.5692 77.5123C18.0923 75.5184 16.4923 73.8984 14.7692 72.4031C13.0461 70.7831 11.2 69.2877 9.35382 67.7923C7.63074 66.1723 5.78458 64.5523 4.18458 62.8077C2.46151 60.9384 0.984585 58.9446 0.123047 56.7015Z"
              fill="currentColor"
            />
            <path
              d="M19.9384 19.4415C18.0923 24.3015 16.2461 29.1615 14.8923 34.2708C13.5384 39.2554 12.6769 44.4892 13.0461 49.5985L13.1692 51.4677C13.2923 52.0908 13.2923 52.7138 13.4154 53.3369C13.5384 54.5831 13.9077 55.8292 14.1538 57.0754C14.7692 59.5677 15.6307 62.06 16.4923 64.4277C18.2154 69.2877 19.9384 74.3969 20.8 79.6308C20.9231 80.1292 20.5538 80.6277 20.0615 80.7523C19.5692 80.8769 19.0769 80.5031 18.9538 80.0046C18.2154 74.8954 16.7384 69.9108 15.1384 65.0508C14.4 62.5584 13.5384 60.0661 13.0461 57.4492C12.8 56.2031 12.5538 54.8323 12.4307 53.5861C12.3077 52.9631 12.3077 52.2154 12.1846 51.5923L12.0615 49.5985C11.9384 44.3646 12.9231 39.1308 14.4 34.1461C15.8769 29.0369 17.8461 24.3015 19.9384 19.4415Z"
              fill="currentColor"
            />
          </svg>

          <div className={styles.indicatorContent}>
            <div className={styles.indicatorNumber}>
              {textConfig.quiz.trustIndicators.users.number}
            </div>
            <div className={styles.indicatorText}>
              {textConfig.quiz.trustIndicators.users.text
                .split("\n")
                .map((line, i) => (
                  <span key={i}>
                    {line}
                    {i === 0 && <br />}
                  </span>
                ))}
            </div>
          </div>

          <svg
            className={styles.wheat}
            viewBox="0 0 32 82"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style={{ transform: "scaleX(-1)" }}
          >
            <path
              d="M31.8769 50.2215C31.6307 52.5892 30.7692 54.9569 29.7846 57.2C28.8 59.4431 27.4461 61.4369 26.2154 63.4308C24.8615 65.4246 23.6307 67.4184 22.4 69.4123C21.1692 71.4061 20.0615 73.5246 19.2 75.7677C19.323 73.2754 20.0615 70.9077 21.1692 68.7892C22.1538 66.5461 23.5077 64.5523 24.7384 62.4338C26.0923 60.44 27.323 58.4461 28.5538 56.4523C29.7846 54.4585 30.8923 52.4646 31.8769 50.2215ZM0.123047 56.7015C1.72305 58.5708 3.32305 60.1908 5.1692 61.6861C6.89228 63.3061 8.73843 64.8015 10.5846 66.2969C12.3077 67.9169 14.1538 69.5369 15.7538 71.2815C17.3538 73.1508 18.8307 75.1446 19.5692 77.5123C18.0923 75.5184 16.4923 73.8984 14.7692 72.4031C13.0461 70.7831 11.2 69.2877 9.35382 67.7923C7.63074 66.1723 5.78458 64.5523 4.18458 62.8077C2.46151 60.9384 0.984585 58.9446 0.123047 56.7015Z"
              fill="currentColor"
            />
            <path
              d="M19.9384 19.4415C18.0923 24.3015 16.2461 29.1615 14.8923 34.2708C13.5384 39.2554 12.6769 44.4892 13.0461 49.5985L13.1692 51.4677C13.2923 52.0908 13.2923 52.7138 13.4154 53.3369C13.5384 54.5831 13.9077 55.8292 14.1538 57.0754C14.7692 59.5677 15.6307 62.06 16.4923 64.4277C18.2154 69.2877 19.9384 74.3969 20.8 79.6308C20.9231 80.1292 20.5538 80.6277 20.0615 80.7523C19.5692 80.8769 19.0769 80.5031 18.9538 80.0046C18.2154 74.8954 16.7384 69.9108 15.1384 65.0508C14.4 62.5584 13.5384 60.0661 13.0461 57.4492C12.8 56.2031 12.5538 54.8323 12.4307 53.5861C12.3077 52.9631 12.3077 52.2154 12.1846 51.5923L12.0615 49.5985C11.9384 44.3646 12.9231 39.1308 14.4 34.1461C15.8769 29.0369 17.8461 24.3015 19.9384 19.4415Z"
              fill="currentColor"
            />
          </svg>
        </div>

        <div className={styles.indicator}>
          <svg
            className={styles.wheat}
            viewBox="0 0 32 82"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M31.8769 50.2215C31.6307 52.5892 30.7692 54.9569 29.7846 57.2C28.8 59.4431 27.4461 61.4369 26.2154 63.4308C24.8615 65.4246 23.6307 67.4184 22.4 69.4123C21.1692 71.4061 20.0615 73.5246 19.2 75.7677C19.323 73.2754 20.0615 70.9077 21.1692 68.7892C22.1538 66.5461 23.5077 64.5523 24.7384 62.4338C26.0923 60.44 27.323 58.4461 28.5538 56.4523C29.7846 54.4585 30.8923 52.4646 31.8769 50.2215ZM0.123047 56.7015C1.72305 58.5708 3.32305 60.1908 5.1692 61.6861C6.89228 63.3061 8.73843 64.8015 10.5846 66.2969C12.3077 67.9169 14.1538 69.5369 15.7538 71.2815C17.3538 73.1508 18.8307 75.1446 19.5692 77.5123C18.0923 75.5184 16.4923 73.8984 14.7692 72.4031C13.0461 70.7831 11.2 69.2877 9.35382 67.7923C7.63074 66.1723 5.78458 64.5523 4.18458 62.8077C2.46151 60.9384 0.984585 58.9446 0.123047 56.7015Z"
              fill="currentColor"
            />
            <path
              d="M19.9384 19.4415C18.0923 24.3015 16.2461 29.1615 14.8923 34.2708C13.5384 39.2554 12.6769 44.4892 13.0461 49.5985L13.1692 51.4677C13.2923 52.0908 13.2923 52.7138 13.4154 53.3369C13.5384 54.5831 13.9077 55.8292 14.1538 57.0754C14.7692 59.5677 15.6307 62.06 16.4923 64.4277C18.2154 69.2877 19.9384 74.3969 20.8 79.6308C20.9231 80.1292 20.5538 80.6277 20.0615 80.7523C19.5692 80.8769 19.0769 80.5031 18.9538 80.0046C18.2154 74.8954 16.7384 69.9108 15.1384 65.0508C14.4 62.5584 13.5384 60.0661 13.0461 57.4492C12.8 56.2031 12.5538 54.8323 12.4307 53.5861C12.3077 52.9631 12.3077 52.2154 12.1846 51.5923L12.0615 49.5985C11.9384 44.3646 12.9231 39.1308 14.4 34.1461C15.8769 29.0369 17.8461 24.3015 19.9384 19.4415Z"
              fill="currentColor"
            />
          </svg>

          <div className={styles.indicatorContent}>
            <div className={styles.indicatorNumber}>
              {textConfig.quiz.trustIndicators.rating.number}
            </div>
            <div className={styles.indicatorStars}>
              <StarIcon size={16} />
              <StarIcon size={16} />
              <StarIcon size={16} />
              <StarIcon size={16} />
              <StarIcon size={16} />
            </div>

            <div className={styles.indicatorText}>
              {textConfig.quiz.trustIndicators.rating.text}
            </div>
          </div>

          <svg
            className={styles.wheat}
            viewBox="0 0 32 82"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style={{ transform: "scaleX(-1)" }}
          >
            <path
              d="M31.8769 50.2215C31.6307 52.5892 30.7692 54.9569 29.7846 57.2C28.8 59.4431 27.4461 61.4369 26.2154 63.4308C24.8615 65.4246 23.6307 67.4184 22.4 69.4123C21.1692 71.4061 20.0615 73.5246 19.2 75.7677C19.323 73.2754 20.0615 70.9077 21.1692 68.7892C22.1538 66.5461 23.5077 64.5523 24.7384 62.4338C26.0923 60.44 27.323 58.4461 28.5538 56.4523C29.7846 54.4585 30.8923 52.4646 31.8769 50.2215ZM0.123047 56.7015C1.72305 58.5708 3.32305 60.1908 5.1692 61.6861C6.89228 63.3061 8.73843 64.8015 10.5846 66.2969C12.3077 67.9169 14.1538 69.5369 15.7538 71.2815C17.3538 73.1508 18.8307 75.1446 19.5692 77.5123C18.0923 75.5184 16.4923 73.8984 14.7692 72.4031C13.0461 70.7831 11.2 69.2877 9.35382 67.7923C7.63074 66.1723 5.78458 64.5523 4.18458 62.8077C2.46151 60.9384 0.984585 58.9446 0.123047 56.7015Z"
              fill="currentColor"
            />
            <path
              d="M19.9384 19.4415C18.0923 24.3015 16.2461 29.1615 14.8923 34.2708C13.5384 39.2554 12.6769 44.4892 13.0461 49.5985L13.1692 51.4677C13.2923 52.0908 13.2923 52.7138 13.4154 53.3369C13.5384 54.5831 13.9077 55.8292 14.1538 57.0754C14.7692 59.5677 15.6307 62.06 16.4923 64.4277C18.2154 69.2877 19.9384 74.3969 20.8 79.6308C20.9231 80.1292 20.5538 80.6277 20.0615 80.7523C19.5692 80.8769 19.0769 80.5031 18.9538 80.0046C18.2154 74.8954 16.7384 69.9108 15.1384 65.0508C14.4 62.5584 13.5384 60.0661 13.0461 57.4492C12.8 56.2031 12.5538 54.8323 12.4307 53.5861C12.3077 52.9631 12.3077 52.2154 12.1846 51.5923L12.0615 49.5985C11.9384 44.3646 12.9231 39.1308 14.4 34.1461C15.8769 29.0369 17.8461 24.3015 19.9384 19.4415Z"
              fill="currentColor"
            />
          </svg>
        </div>

        <div className={styles.indicator}>
          <svg
            className={styles.wheat}
            viewBox="0 0 32 82"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M31.8769 50.2215C31.6307 52.5892 30.7692 54.9569 29.7846 57.2C28.8 59.4431 27.4461 61.4369 26.2154 63.4308C24.8615 65.4246 23.6307 67.4184 22.4 69.4123C21.1692 71.4061 20.0615 73.5246 19.2 75.7677C19.323 73.2754 20.0615 70.9077 21.1692 68.7892C22.1538 66.5461 23.5077 64.5523 24.7384 62.4338C26.0923 60.44 27.323 58.4461 28.5538 56.4523C29.7846 54.4585 30.8923 52.4646 31.8769 50.2215ZM0.123047 56.7015C1.72305 58.5708 3.32305 60.1908 5.1692 61.6861C6.89228 63.3061 8.73843 64.8015 10.5846 66.2969C12.3077 67.9169 14.1538 69.5369 15.7538 71.2815C17.3538 73.1508 18.8307 75.1446 19.5692 77.5123C18.0923 75.5184 16.4923 73.8984 14.7692 72.4031C13.0461 70.7831 11.2 69.2877 9.35382 67.7923C7.63074 66.1723 5.78458 64.5523 4.18458 62.8077C2.46151 60.9384 0.984585 58.9446 0.123047 56.7015Z"
              fill="currentColor"
            />
            <path
              d="M19.9384 19.4415C18.0923 24.3015 16.2461 29.1615 14.8923 34.2708C13.5384 39.2554 12.6769 44.4892 13.0461 49.5985L13.1692 51.4677C13.2923 52.0908 13.2923 52.7138 13.4154 53.3369C13.5384 54.5831 13.9077 55.8292 14.1538 57.0754C14.7692 59.5677 15.6307 62.06 16.4923 64.4277C18.2154 69.2877 19.9384 74.3969 20.8 79.6308C20.9231 80.1292 20.5538 80.6277 20.0615 80.7523C19.5692 80.8769 19.0769 80.5031 18.9538 80.0046C18.2154 74.8954 16.7384 69.9108 15.1384 65.0508C14.4 62.5584 13.5384 60.0661 13.0461 57.4492C12.8 56.2031 12.5538 54.8323 12.4307 53.5861C12.3077 52.9631 12.3077 52.2154 12.1846 51.5923L12.0615 49.5985C11.9384 44.3646 12.9231 39.1308 14.4 34.1461C15.8769 29.0369 17.8461 24.3015 19.9384 19.4415Z"
              fill="currentColor"
            />
          </svg>

          <div className={styles.indicatorContent}>
            <div className={styles.indicatorNumber}>
              {textConfig.quiz.trustIndicators.guarantee.number}
            </div>
            <div className={styles.indicatorText}>
              {textConfig.quiz.trustIndicators.guarantee.text
                .split("\n")
                .map((line, i) => (
                  <span key={i}>
                    {line}
                    {i === 0 && <br />}
                  </span>
                ))}
            </div>
          </div>

          <svg
            className={styles.wheat}
            viewBox="0 0 32 82"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style={{ transform: "scaleX(-1)" }}
          >
            <path
              d="M31.8769 50.2215C31.6307 52.5892 30.7692 54.9569 29.7846 57.2C28.8 59.4431 27.4461 61.4369 26.2154 63.4308C24.8615 65.4246 23.6307 67.4184 22.4 69.4123C21.1692 71.4061 20.0615 73.5246 19.2 75.7677C19.323 73.2754 20.0615 70.9077 21.1692 68.7892C22.1538 66.5461 23.5077 64.5523 24.7384 62.4338C26.0923 60.44 27.323 58.4461 28.5538 56.4523C29.7846 54.4585 30.8923 52.4646 31.8769 50.2215ZM0.123047 56.7015C1.72305 58.5708 3.32305 60.1908 5.1692 61.6861C6.89228 63.3061 8.73843 64.8015 10.5846 66.2969C12.3077 67.9169 14.1538 69.5369 15.7538 71.2815C17.3538 73.1508 18.8307 75.1446 19.5692 77.5123C18.0923 75.5184 16.4923 73.8984 14.7692 72.4031C13.0461 70.7831 11.2 69.2877 9.35382 67.7923C7.63074 66.1723 5.78458 64.5523 4.18458 62.8077C2.46151 60.9384 0.984585 58.9446 0.123047 56.7015Z"
              fill="currentColor"
            />
            <path
              d="M19.9384 19.4415C18.0923 24.3015 16.2461 29.1615 14.8923 34.2708C13.5384 39.2554 12.6769 44.4892 13.0461 49.5985L13.1692 51.4677C13.2923 52.0908 13.2923 52.7138 13.4154 53.3369C13.5384 54.5831 13.9077 55.8292 14.1538 57.0754C14.7692 59.5677 15.6307 62.06 16.4923 64.4277C18.2154 69.2877 19.9384 74.3969 20.8 79.6308C20.9231 80.1292 20.5538 80.6277 20.0615 80.7523C19.5692 80.8769 19.0769 80.5031 18.9538 80.0046C18.2154 74.8954 16.7384 69.9108 15.1384 65.0508C14.4 62.5584 13.5384 60.0661 13.0461 57.4492C12.8 56.2031 12.5538 54.8323 12.4307 53.5861C12.3077 52.9631 12.3077 52.2154 12.1846 51.5923L12.0615 49.5985C11.9384 44.3646 12.9231 39.1308 14.4 34.1461C15.8769 29.0369 17.8461 24.3015 19.9384 19.4415Z"
              fill="currentColor"
            />
          </svg>
        </div>
      </div>
    </div>
  );
};
